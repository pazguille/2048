/*! gesturekit.js v1.1.0 http://gesturekit.com/ | Released under the Apache v2 License. */!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.gesturekit=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(){return this}c.prototype.on=function(a,b,c){return this._eventsCollection=this._eventsCollection||{},b.once=c||!1,void 0===this._eventsCollection[a]&&(this._eventsCollection[a]=[]),this._eventsCollection[a].push(b),this},c.prototype.once=function(a,b){return this.on(a,b,!0),this},c.prototype.off=function(a,b){if(void 0===this._eventsCollection)return this;var c=this._eventsCollection[a];return void 0!==c&&c.forEach(function(a,d){return a===b?(c.splice(d,1),void 0):void 0}),this},c.prototype.getListeners=function(a){return this._eventsCollection[a]},c.prototype.emit=function(){var a,b=Array.prototype.slice.call(arguments,0),c=b.shift(),d=this;return"string"==typeof c&&(c={type:c}),c.target||(c.target=this),void 0!==this._eventsCollection&&void 0!==this._eventsCollection[c.type]&&(a=this._eventsCollection[c.type],a.forEach(function(a){a.apply(d,b),a.once&&d.off(c.type,a)})),this},b.exports=c},{}],2:[function(a,b){"use strict";function c(a){var b;for(b in k)a.hasOwnProperty(b)||(a[b]=k[b]);return a}function d(){return this}var e,f=a("./helpers").inherit,g=a("./Emitter"),h=a("./touchEvents"),i=a("./Recognizer"),j=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),k={sensor:window.document.documentElement,enabled:!0,threshold:0},l=!1;f(d,g),d.prototype.init=function(a){return void 0===this.recognizer&&(this._options=c(a||{}),this._threshold=this._options.threshold,this.sensor=this._options.sensor,this._setPointerEvents(),this._enabled=this._options.enabled),this},d.prototype._setPointerEvents=function(){var a=this;return this.recognizer=new i(this._options.gid),this._update=function(){clearTimeout(a._wait),a.recognizer.setPoints(e.touches),a.emit("gesturemotion",e),l=!1},this._captureMotion=function(b){a.emit("pointermove",b),!l&&a._enabled&&(b.preventDefault(),e=b,l=!0,j(a._update))},this.sensor.addEventListener(h.start,function(b){a.emit("pointerstart",b),a._enabled&&(a.recognizer.setPoints(b.touches),a.emit("gesturestart",b))},!1),this.sensor.addEventListener(h.move,a._captureMotion,!1),this.sensor.addEventListener(h.end,function(b){a.emit("pointerend",b),(l||a._enabled)&&(l=!1,a._wait=setTimeout(function(){a.recognizer.recognizeGesture(),a.emit("gestureend",b)},a._threshold))},!1),this},d.prototype.enable=function(){return this._enabled=!0,this.emit("enable"),this},d.prototype.disable=function(){return this._enabled=!1,this.emit("disable"),this},b.exports=d},{"./Emitter":1,"./Recognizer":3,"./helpers":4,"./touchEvents":7}],3:[function(a,b){"use strict";function c(a){return this.gid=a,this.init(),this}var d=a("./pdollar").Pdollar,e=a("./pdollar").Point,f="http://api.gesturekit.com/v1.0/index.php/sdk/getgestures/";c.prototype.init=function(){return this.pointsCollection=[],this.pdollar=new d,this.metadata={},this.loadGestures(),this},c.prototype.loadGestures=function(){var a,b,c=this,d=new XMLHttpRequest;return d.open("GET",f+this.gid),d.onreadystatechange=function(){d.readyState===d.DONE&&(a=d.status,a>=200&&300>a||304===a||0===a?(b=JSON.parse(d.response||d.responseText),c.addGestures(b.gestureset.gestures),gesturekit.emit("load",b)):gesturekit.emit("fail"))},d.send(),this},c.prototype.addGestures=function(a){var b,c,d,f=this;return a.forEach(function(a){b=a.method,c=a.metadata,""!==c&&null!==c&&void 0===f.metadata[b]&&(f.metadata[b]=c),d=[],a.gesture.forEach(function(a){d.push(new e(parseFloat(a.X),parseFloat(a.Y),a.ID))}),f.pdollar.addGesture(b,d)}),this},c.prototype.setPoints=function(a){var b=this;return this._pointers=a.length,[].forEach.call(a,function(a,c){b.pointsCollection.push(new e(a.pageX,a.pageY,c))}),this},c.prototype.processPoints=function(){return this.pointsCollection.sort(function(a,b){return a.ID>b.ID?1:a.ID<b.ID?-1:0}),this},c.prototype.recognizeGesture=function(){if(!(this.pointsCollection.length<5)){this.processPoints();var a=this.pdollar.recognize(this.pointsCollection);return a.metadata=this.metadata[a.name],0!==parseFloat(a.score)?(gesturekit.emit(a.name,a),gesturekit.emit("recognize",a)):gesturekit.emit("notrecognize"),this.pointsCollection.length=0,this}},b.exports=c},{"./pdollar":6}],4:[function(a,b,c){"use strict";c.extend=function(a,b){var c;for(c in b)b[c]&&(a[c]=b[c]);return a},c.inherit=function(a,b){var d=a.prototype||{};return a.prototype=c.extend(d,b.prototype),b.prototype}},{}],5:[function(a,b){"use strict";var c,d=a("./Gesturekit");c=new d,c.version="1.1.0",b.exports=c},{"./Gesturekit":2}],6:[function(a,b){"use strict";function c(a,b,c){this.X=a,this.Y=b,this.ID=c}function d(a,b){var d=this;this.name=a,this.points=[],b.forEach(function(a){d.points.push(new c(a.X,a.Y,a.ID))})}function e(a,b){var c=b.X-a.X,d=b.Y-a.Y;return o.sqrt(c*c+d*d)}function f(a,b,c){var d,f,g,h,i,j=a.length,k=[],l=0,m=c;a.forEach(function(){k.push(!1)});do{for(d=-1,f=+1/0,g=0;j>g;g+=1)k[g]||(i=e(a[m],b[g]),f>i&&(f=i,d=g));k[d]=!0,h=1-(m-c+j)%j/j,l+=h*f,m=(m+1)%j}while(m!==c);return l}function g(a,b){var c,d,e=.5,g=o.floor(o.pow(a.length,1-e)),h=+1/0,i=0,j=a.length;for(i;j>i;i+=g)c=f(a,b.points,i),d=f(b.points,a,i),h=o.min(h,o.min(c,d));return h}function h(a){var b=0,c=1,d=a.length;for(c;d>c;c+=1)a[c].ID===a[c-1].ID&&(b+=e(a[c-1],a[c]));return b}function i(a,b){var d,f,g,i,j=h(a)/(b-1),k=0,l=[a[0]],m=1;for(m;m<a.length;m+=1)a[m].ID===a[m-1].ID&&(d=e(a[m-1],a[m]),k+d>=j?(f=a[m-1].X+(j-k)/d*(a[m].X-a[m-1].X),g=a[m-1].Y+(j-k)/d*(a[m].Y-a[m-1].Y),i=new c(f,g,a[m].ID),l.push(i),a.splice(m,0,i),k=0):k+=d);return l.length===b-1&&l.push(new c(a[a.length-1].X,a[a.length-1].Y,a[a.length-1].ID)),l}function j(a){var b,d,e,f=0,g=0,h=a.length,i=+1/0,j=-1/0,k=+1/0,l=-1/0,m=[];for(f;h>f;f+=1)i=o.min(i,a[f].X),k=o.min(k,a[f].Y),j=o.max(j,a[f].X),l=o.max(l,a[f].Y);for(b=o.max(j-i,l-k),g;h>g;g+=1)d=(a[g].X-i)/b,e=(a[g].Y-k)/b,m.push(new c(d,e,a[g].ID));return m}function k(a){var b=0,d=0,e=0,f=a.length;for(e;f>e;e+=1)b+=a[e].X,d+=a[e].Y;return b/=f,d/=f,new c(b,d,0)}function l(a,b){var d,e,f=k(a),g=[],h=0,i=a.length;for(h;i>h;h+=1)d=a[h].X+b.X-f.X,e=a[h].Y+b.Y-f.Y,g.push(new c(d,e,a[h].ID));return g}function m(a,b){var c=0,d=0,f=a.length,g=b.length;for(f>g&&(f=g),c;f>c;c+=1)d+=e(a[c],b[c]);return d}function n(){this.pointClouds=[],this.recognize=function(a){a=i(a,p),a=j(a),a=l(a,q);var b,c,d,e,f={name:s,score:t},h=+1/0,k=-1,n=+1/0,u=-1;return this.pointClouds.forEach(function(c,d){b=g(a,c),h>b?(n=h,u=k,h=b,k=d):n>b&&(n=b,u=d)}),-1!==k&&(c=m(a,this.pointClouds[k].points),d=m(a,this.pointClouds[u].points),e=0,c>d?(f.name=this.pointClouds[u].name,e=n):(f.name=this.pointClouds[k].name,e=h),r>=e?f.score=o.max((e-2)/-2,0):f.name=s),f},this.addGesture=function(a,b){this.pointClouds.push(new d(a,b))}}var o=window.Math,p=32,q=new c(0,0,0),r=1.5,s="No match.",t=0;b.exports.Pdollar=n,b.exports.Point=c},{}],7:[function(a,b){"use strict";var c=window.navigator.msPointerEnabled,d={start:c?"MSPointerDown":"touchstart",move:c?"MSPointerMove":"touchmove",end:c?"MSPointerUp":"touchend"};b.exports=d},{}]},{},[5])(5)});